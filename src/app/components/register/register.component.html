<div class="register-container">
  <h2>Registro</h2>

  @if (errorMessage) {
  <div class="error-message">
    {{ errorMessage }}
  </div>
  } @if (successMessage) {
  <div class="success-message">
    {{ successMessage }}
  </div>
  }

  <form [formGroup]="registerForm" (ngSubmit)="register()">
    <div class="form-group">
      <label for="name">Nombre</label>
      <input
        type="text"
        id="name"
        formControlName="name"
        [class.invalid]="
          registerForm.get('name')?.invalid && registerForm.get('name')?.touched
        "
      />
      @if (registerForm.get('name')?.invalid &&
      registerForm.get('name')?.touched) {
      <div class="field-error">
        @if (registerForm.get('name')?.errors?.['required']) { El nombre es
        requerido } @if (registerForm.get('name')?.errors?.['minlength']) { El
        nombre debe tener al menos 2 caracteres }
      </div>
      }
    </div>

    <div class="form-group">
      <label for="email">Email</label>
      <input
        type="email"
        id="email"
        formControlName="email"
        [class.invalid]="
          registerForm.get('email')?.invalid &&
          registerForm.get('email')?.touched
        "
      />
      @if (registerForm.get('email')?.invalid &&
      registerForm.get('email')?.touched) {
      <div class="field-error">
        @if (registerForm.get('email')?.errors?.['required']) { El email es
        requerido } @if (registerForm.get('email')?.errors?.['email']) { Ingresa
        un email válido }
      </div>
      }
    </div>

    <div class="form-group">
      <label for="password">Contraseña</label>
      <input
        type="password"
        id="password"
        formControlName="password"
        [class.invalid]="
          registerForm.get('password')?.invalid &&
          registerForm.get('password')?.touched
        "
      />
      @if (registerForm.get('password')?.invalid &&
      registerForm.get('password')?.touched) {
      <div class="field-error">
        @if (registerForm.get('password')?.errors?.['required']) { La contraseña
        es requerida } @if (registerForm.get('password')?.errors?.['minlength'])
        { La contraseña debe tener al menos 6 caracteres }
      </div>
      }
    </div>

    <div class="form-group">
      <label for="confirmPassword">Confirmar Contraseña</label>
      <input
        type="password"
        id="confirmPassword"
        formControlName="confirmPassword"
        [class.invalid]="
          registerForm.get('confirmPassword')?.invalid &&
          registerForm.get('confirmPassword')?.touched
        "
      />
      @if (registerForm.get('confirmPassword')?.invalid &&
      registerForm.get('confirmPassword')?.touched) {
      <div class="field-error">
        @if (registerForm.get('confirmPassword')?.errors?.['required']) {
        Confirma tu contraseña } @if
        (registerForm.get('confirmPassword')?.errors?.['passwordMismatch']) {
        Las contraseñas no coinciden }
      </div>
      }
    </div>

    <button
      type="submit"
      [disabled]="!registerForm.valid || isLoading"
      class="submit-btn"
    >
      @if (isLoading) { Registrando... } @else { Registrarse }
    </button>
  </form>

  <div class="login-link">
    ¿Ya tienes una cuenta? <a routerLink="/login">Inicia sesión aquí</a>
  </div>
</div>
